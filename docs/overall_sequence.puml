@startuml HammerspoonOverallSequence
title Hammerspoon overall hotkey processing

actor User as user
participant "Hammerspoon engine" as engine
participant "init.lua" as init
participant "core/init_system.lua" as initSystem
participant "modules.media_controls" as media
participant "modules.app_launcher" as launcher
participant "modules.keystroke_visualizer" as keyviz
participant "utils.notification_utils" as notification
participant "hs.hotkey" as hotkey
participant "hs.alert" as alert

autonumber

user -> engine: reload configuration
engine -> init: load init.lua
init -> initSystem: require("core.init_system")
initSystem -> initSystem: register modules
initSystem -> hotkey: bind startup hotkeys
initSystem -> media: load module
media -> hotkey: bind media hotkeys (description forwarded)
initSystem -> launcher: load module
launcher -> hotkey: bind launcher hotkeys
initSystem -> keyviz: load module
keyviz -> hotkey: bind visualizer hotkeys (description forwarded)
initSystem --> init: modules ready
init --> engine: initialization complete

== runtime example ==
user -> hotkey: press ctrl+cmd+alt+up
hotkey -> media: invoke sendMediaKeyEvent()
media -> notification: sendAlert("Media: SOUND_UP", 0.5)
notification -> alert: hs.alert.show(...)
alert --> user: single toast shown

note over hotkey, alert
All hotkeys run through `hotkey_utils.bind`, which stamps descriptions into the log
while runtime feedback stays delegated to notification_utils.
end note

@enduml
